.navbar-fixed
  %nav
    .nav-wrapper
      = link_to "TeamMaker", root_path, class: "brand-logo Motion", style: "padding-left:15px;font-size:30pt !important; "
      %a.button-collapse{"data-activates" => "mobile", :href => "#"}
        %i.material-icons menu
      %ul#nav-mobile.right.hide-on-med-and-down
        - if user_signed_in?
          %ul#dropdown_user.dropdown-content{:style => "margin-top: 64px;"}
            %li= link_to 'Cuenta',edit_user_registration_path
            %li.divider{:role => "separator"}
            %li= link_to "Cerrar sesi贸n", destroy_user_session_path, method: :delete
          %ul#dropdown_section.dropdown-content{:style => "margin-top: 64px;"}
            - current_user.sections.each do |section|
              %li= link_to section.section,section_path(section)
          %ul#dropdown_test.dropdown-content{:style => "margin-top: 64px;"}
            - if current_user.accept_model?
              %li
                - if current_user.test_count != 6
                  = link_to 'Personalidad<span class="new badge red" style="margin-left:14px" data-badge-caption="test">1</span>'.html_safe,test_eneagrama_path
                - else
                  = link_to 'Personalidad<span class="new badge green" style="margin-left:14px" data-badge-caption="resuelto"></span>'.html_safe,test_eneagrama_path
              %li
                - if !current_user.tests.find(current_user.tests.where(kind: 2)).answered?
                  = link_to 'Afinidad social<span class="new badge red" data-badge-caption="test">2</span>'.html_safe,test_social_path
                - elsif !current_user.tests.find(current_user.tests.where(kind: 3)).answered?
                  = link_to 'Afinidad social<span class="new badge red" data-badge-caption="test">1</span>'.html_safe,test_social_path
                - else
                  = link_to 'Social<span class="new badge green" data-badge-caption="resuelto" style="margin-left:63px"></span>'.html_safe,test_social_path
          - if current_user.rol == 3 && current_user.accept_model == true
            - if current_user.accept_model?
              - if current_user.tests.find(current_user.tests.where(kind: 1)).answered? && current_user.tests.find(current_user.tests.where(kind: 2)).answered? && current_user.tests.find(current_user.tests.where(kind: 3)).answered?
                %li{:class => "#{'active' if current_page?(mi_equipo_path)}"}= link_to "Mi equipo", mi_equipo_path
            %li
              %a.dropdown-button{"data-activates" => "dropdown_test", :href => "#!"}
                Mis test
                - if current_user.accept_model?
                  - if current_user.tests.find(current_user.tests.where(kind: 1)).answered? && current_user.tests.find(current_user.tests.where(kind: 2)).answered? && current_user.tests.find(current_user.tests.where(kind: 3)).answered?
                    %span.new.badge{"data-badge-caption" => ""} Resueltos
                  - else
                    %span.new.badge{"data-badge-caption" => ""} Test pendientes
                %i.material-icons.right arrow_drop_down
          - if current_user.rol == 0
            %li{:class => "#{'active' if current_page?(grupos_path)}"}= link_to "Grupos", grupos_path
            %li{:class => "#{'active' if current_page?(usuarios_path)}"}= link_to "Usuarios", usuarios_path
            %li{:class => "#{'active' if current_page?(sections_path)}"}= link_to "Secciones", sections_path
          - elsif current_user.rol == 1 || current_user.rol == 2
            %li
              %a.dropdown-button{"data-activates" => "dropdown_section", :href => "#!"}
                Mis secciones
                %i.material-icons.right arrow_drop_down
          %li
            %a.dropdown-button{"data-activates" => "dropdown_user", :href => "#!"}
              = current_user.email
              %i.material-icons.right arrow_drop_down
        - else
          = link_to "Iniciar sesi贸n", new_user_session_path, :class => "btn btn-default navbar-btn waves-effect waves-light features-black"
%ul#mobile.side-nav
  - if user_signed_in?
    %ul#dropdown_user_mobile.dropdown-content{:style => "margin-top: 48px;"}
      %li= link_to 'Cuenta',edit_user_registration_path
      %li.divider{:role => "separator"}
      %li= link_to "Cerrar sesi贸n", destroy_user_session_path, method: :delete
    %ul#dropdown_section_mobile.dropdown-content{:style => "margin-top: 64px;"}
      - current_user.sections.each do |section|
        %li= link_to section.section,section_path(section)
    %ul#dropdown_test_mobile.dropdown-content{:style => "margin-top: 48px;"}
      - if current_user.accept_model?
        %li
          - if current_user.test_count != 6
            = link_to 'Personalidad<span class="new badge red" style="margin-left:26.5px" data-badge-caption="test">1</span>'.html_safe,test_eneagrama_path
          - else
            = link_to 'Personalidad<span class="new badge green" style="margin-left:26.5px" data-badge-caption="resuelto"></span>'.html_safe,test_eneagrama_path
        %li
          - if !current_user.tests.find(current_user.tests.where(kind: 2)).answered?
            = link_to 'Afinidad social<span class="new badge red mid" data-badge-caption="test">2</span>'.html_safe,test_social_path
          - elsif !current_user.tests.find(current_user.tests.where(kind: 3)).answered?
            = link_to 'Afinidad social<span class="new badge red mid" data-badge-caption="test">1</span>'.html_safe,test_social_path
          - else
            = link_to 'Afinidad social<span class="new badge green mid" data-badge-caption="resuelto"></span>'.html_safe,test_social_path
    - if current_user.rol == 3 && current_user.accept_model == true
      %li
        %a.dropdown-button{"data-activates" => "dropdown_test_mobile", :href => "#!"}
          Mis test
          - if current_user.accept_model?
            - if current_user.tests.find(current_user.tests.where(kind: 1)).answered? && current_user.tests.find(current_user.tests.where(kind: 2)).answered? && current_user.tests.find(current_user.tests.where(kind: 3)).answered?
              %span.new.badge{"data-badge-caption" => ""} Resuelto
            - else
              %span.new.badge{"data-badge-caption" => ""} Test pendientes
          %i.material-icons.right arrow_drop_down
    - if current_user.rol == 0
      %li{:class => "#{'active' if current_page?(grupos_path)}"}= link_to "Grupos", grupos_path
      %li{:class => "#{'active' if current_page?(usuarios_path)}"}= link_to "Usuarios", usuarios_path
      %li{:class => "#{'active' if current_page?(sections_path)}"}= link_to "Secciones", sections_path
    - elsif current_user.rol == 1 || current_user.rol == 2
      %li
        %a.dropdown-button{"data-activates" => "dropdown_section_mobile", :href => "#!"}
          Mis secciones
          %i.material-icons.right arrow_drop_down
    %li
      %a.dropdown-button{"data-activates" => "dropdown_user_mobile", :href => "#!"}
        = current_user.email
        %i.material-icons.right arrow_drop_down
  - else
    = link_to "Iniciar sesi贸n", new_user_session_path, :class => "waves-effect waves-light btn features-black"
